!function(n,e,o){"use strict";function t(n){d=c,"usa"===n&&(d=u),o("#buy").find("a").attr("href",d),ArduinoAuthHelper.getToken().then(function(n){h(n),g(n)})}var r=o(".main-nav"),a=o(".arduino-nav"),s=o(".cart-submenu"),i=o(".nav-left"),l=o("body"),c="https://store.arduino.cc",u="https://store.arduino.cc/usa",d=c,f=function(){l.removeClass("noscroll"),s.hide()},p=function(n){var e={"X-Requested-With":"XMLHttpRequest"};return n&&(e.Authorization="Bearer "+n),e},h=function(n){jQuery.ajax({url:d+"/cart/api/count?ajax=1",xhrFields:{withCredentials:!0},headers:p(n),success:function(n){var e=n.count,o=jQuery("#cart").find(".badge");o.html(e),o.toggle(e>0),0===e&&window.innerWidth<415&&setTimeout(function(){f()},4e3)},error:function(n){console.error(n)}})},g=function(n){jQuery.ajax({url:d+"/cart/api/minicart?ajax=1",xhrFields:{withCredentials:!0},headers:p(n),success:function(n){var e=n.content;s.find(".dropdown-box").html(e)},error:function(n){console.error("Can't fetch cart data"),console.error(n)}})};t(ArduinoGeo.get());var m=window.location.protocol+"//"+window.location.hostname,v=o("#searchform"),w=o("#searchform-mobile");if(-1!==m.indexOf("store")){var b="/catalogsearch/result/",C=o(".eu-africa");"usa"===ArduinoGeo.get()&&(b="/usa/catalogsearch/result/",C=o(".america-asia")),v.attr("action",b),w.attr("action",b),C.show()}else-1!==m.indexOf("blog")?(v.attr("action",m),w.attr("action",m),o(".search-typing").attr("id","s").attr("name","s")):(v.find(".fill-it").val(m),w.find(".fill-it").val(m));var k=AlgoliaHelper.getAlgoliaSearch();if(o(".logo-link").attr("href",m),o(".logo-link-resellers").attr("href",m),k){a.addClass("search-open"),v.find(".search-typing").css("padding-right","30px"),w.find(".search-typing").css("padding-right","7px"),o(".logo-link").css("left","0"),o(".logo-link-resellers").css("left","0"),v.on("click",function(n){n.target===this&&v.submit()}),w.on("click",function(n){n.target===this&&w.submit()});var x=o(".search-typing"),y=o(".clear-icon");x.on("input",function(){y.toggle(!!this.value)}),y.on("touchstart click",function(n){n.preventDefault(),x.val("").trigger("input"),window.searchInput&&window.searchInput.autocomplete.setVal("")})}o("#search-bar").on("click",function(){a.addClass("search-open")}),o("html").on("click",function(n){o(n.target).hasClass("search-typing")||"search-bar"===n.target.id||k||a.removeClass("search-open"),0===o(n.target).parents(".burger-menu").length&&0===o(n.target).parents(".nav-left").length&&(i.removeClass("open"),i.find(".nav-submenu").removeClass("open")),0===o(n.target).parents(".profile-dropdown").length&&0===o(n.target).is(".profile-dropdown")&&o(".profile-dropdown").find(".nav-submenu").removeClass("open")}),o(window).scroll(function(){k||(a.removeClass("search-open"),o(document).scrollTop()>100?a.addClass("collapsed"):a.removeClass("collapsed"))}),o(".burger-menu").on("click",function(){i.toggleClass("open"),i.hasClass("open")?l.addClass("noscroll"):l.removeClass("noscroll"),i.find(".nav-submenu").removeClass("open"),o(".profile-dropdown").find(".nav-submenu").removeClass("open")}),o(".nav-left .has-submenu").on("click",function(){i.find(".has-submenu").not(this).find(".nav-submenu").removeClass("open"),o(this).find(".nav-submenu").toggleClass("open"),f()}),o(".profile-dropdown").on("click",function(){o(this).find(".nav-submenu").toggleClass("open"),i.removeClass("open"),l.removeClass("noscroll"),f()}),r.find(".cart-dropdown-trigger").on("click",function(){o(".cart-submenu:hidden").length>0?(l.addClass("noscroll"),s.show(),i.removeClass("open"),o(".profile-dropdown").find(".nav-submenu").removeClass("open"),t(ArduinoGeo.get())):f()}),r.find(".cart-dropdown-trigger").on("mouseleave",function(){f()}),o(".cart-dropdown-trigger").find(".cart-close-button").on("click",function(){f()});var j=o(".quotes-submenu");r.find(".quotes-dropdown-trigger").on("click",function(){o(".quotes-submenu:hidden").length>0?(j.show(),i.removeClass("open"),o(".profile-dropdown").find(".nav-submenu").removeClass("open")):j.hide()}),r.find(".quotes-dropdown-trigger").on("mouseleave",function(){j.hide()}),o(".quotes-dropdown-trigger").find(".cart-close-button").on("click",function(){j.hide()}),o(".store-location-button").find(".cart-close-button").on("click",function(){localStorage.setItem("location-aware",!0)})}(window,document,window.jQuery);